# 4. Simplified Use Cases

This section describes the key use cases for the OneMount system, focusing on user interactions and expected outcomes.

## 4.1 Mount OneDrive Filesystem

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-FS-001                                                                                                                                                                                                            |
| **Name**                     | Mount OneDrive Filesystem                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to access OneDrive files through the native filesystem <br> **System Administrator**: Wants reliable and secure integration with the system                                                                                                                 |
| **Pre-conditions**           | 1. User has a Microsoft account with OneDrive <br> 2. OneMount is installed on the Linux system <br> 3. FUSE is properly configured on the system                                                                                          |
| **Post-conditions**          | **Successful**: OneDrive is mounted as a filesystem at the specified mount point <br> **Failure**: Error message is displayed, and OneDrive is not mounted                                                                    |
| **Main Flow**                | 1. User launches OneMount or OneMount-launcher <br> 2. User selects or enters a mount point directory <br> 3. System prompts for Microsoft account authentication <br> 4. User completes authentication process <br> 5. System obtains OAuth tokens <br> 6. System mounts OneDrive at the specified mount point <br> 7. System displays success message                                                      |
| **Alternative Flows**        | **AF-1 Command Line Mounting**: <br> a. User runs onemount with mount point as parameter <br> b. System authenticates and mounts OneDrive <br><br> **AF-2 Authentication Failure**: <br> a. Authentication fails <br> b. System displays error message <br> c. User is prompted to retry authentication |
| **Special Requirements**     | - Internet connectivity for initial authentication <br> - FUSE kernel module must be loaded <br> - Write permissions for the mount point directory                                                                                                              |
| **Related FRs**              | <a href="#frFs001">FR-FS-001</a>, <a href="#frAuth001">FR-AUTH-001</a>, <a href="#frAuth002">FR-AUTH-002</a>, <a href="#frUi001">FR-UI-001</a>, <a href="#frUi002">FR-UI-002</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrSec001">NFR-SEC-001</a>, <a href="#nfrUse003">NFR-USE-003</a>                                                                                                                                                |

## 4.2 Access and Modify Files

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-FS-002                                                                                                                                                                                                            |
| **Name**                     | Access and Modify Files                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to view and edit files stored in OneDrive <br> **System Administrator**: Wants efficient and reliable file operations                                                                                                                 |
| **Pre-conditions**           | 1. OneDrive is mounted as a filesystem <br> 2. User has appropriate permissions for the files <br> 3. System has internet connectivity                                                                                          |
| **Post-conditions**          | **Successful**: Files are accessed/modified and changes are synchronized with OneDrive <br> **Failure**: Error message is displayed, and operation fails                                                                    |
| **Main Flow**                | 1. User navigates to the mounted OneDrive directory <br> 2. User opens a file using any standard application <br> 3. System downloads the file content on-demand <br> 4. User views or modifies the file <br> 5. User saves changes to the file <br> 6. System uploads the modified file to OneDrive <br> 7. System updates local cache                                                      |
| **Alternative Flows**        | **AF-1 Large File Handling**: <br> a. User accesses a large file <br> b. System downloads the file in chunks <br> c. File is presented to the user <br><br> **AF-2 Network Error During Upload**: <br> a. Network error occurs during upload <br> b. System retries the upload <br> c. If retries fail, system caches changes for later synchronization |
| **Special Requirements**     | - Sufficient disk space for file caching <br> - Appropriate file permissions <br> - Compatible applications for file types                                                                                                              |
| **Related FRs**              | <a href="#frFs002">FR-FS-002</a>, <a href="#frFs004">FR-FS-004</a>, <a href="#frFs005">FR-FS-005</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrPerf001">NFR-PERF-001</a>, <a href="#nfrPerf003">NFR-PERF-003</a>, <a href="#nfrPerf004">NFR-PERF-004</a>, <a href="#nfrRel001">NFR-REL-001</a>, <a href="#nfrRel003">NFR-REL-003</a>                                                                                                                                                |

## 4.3 Work with Files Offline

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-OFF-001                                                                                                                                                                                                            |
| **Name**                     | Work with Files Offline                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to access and modify files when offline <br> **System Administrator**: Wants reliable offline functionality without data loss                                                                                                                 |
| **Pre-conditions**           | 1. OneDrive is mounted as a filesystem <br> 2. Files have been previously accessed (cached) <br> 3. System has lost internet connectivity                                                                                          |
| **Post-conditions**          | **Successful**: User can access cached files and make changes while offline <br> **Failure**: Error message is displayed for uncached files                                                                    |
| **Main Flow**                | 1. System detects loss of internet connectivity <br> 2. System switches to offline mode <br> 3. User navigates to the mounted OneDrive directory <br> 4. User opens a previously accessed file <br> 5. System serves the file from local cache <br> 6. User modifies and saves the file <br> 7. System stores changes in local cache                                                      |
| **Alternative Flows**        | **AF-1 Accessing Uncached File**: <br> a. User attempts to access a file not in cache <br> b. System displays error message indicating the file is unavailable offline <br><br> **AF-2 Reconnection**: <br> a. Internet connectivity is restored <br> b. System detects connectivity <br> c. System synchronizes cached changes with OneDrive <br> d. System returns to online mode |
| **Special Requirements**     | - Sufficient disk space for file caching <br> - Automatic network connectivity detection                                                                                                              |
| **Related FRs**              | <a href="#frOff001">FR-OFF-001</a>, <a href="#frOff002">FR-OFF-002</a>, <a href="#frOff003">FR-OFF-003</a>, <a href="#frOff004">FR-OFF-004</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrRel001">NFR-REL-001</a>, <a href="#nfrRel003">NFR-REL-003</a>                                                                                                                                                |

## 4.4 Handle File Conflicts

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-FS-003                                                                                                                                                                                                            |
| **Name**                     | Handle File Conflicts                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to resolve conflicts without data loss <br> **System Administrator**: Wants reliable conflict resolution                                                                                                                 |
| **Pre-conditions**           | 1. OneDrive is mounted as a filesystem <br> 2. A file has been modified both locally and remotely <br> 3. System has detected a conflict during synchronization                                                                                          |
| **Post-conditions**          | **Successful**: Conflict is resolved according to user's choice <br> **Failure**: Error message is displayed, and conflict remains unresolved                                                                    |
| **Main Flow**                | 1. System detects a file conflict during synchronization <br> 2. System creates a conflict copy of the file <br> 3. System notifies the user of the conflict <br> 4. User views both versions of the file <br> 5. User decides which version to keep or manually merges changes <br> 6. System applies the user's resolution <br> 7. System synchronizes the resolved file with OneDrive                                                      |
| **Alternative Flows**        | **AF-1 Automatic Resolution**: <br> a. System applies predefined conflict resolution strategy <br> b. System keeps both versions with different names <br><br> **AF-2 Conflict During Offline Synchronization**: <br> a. Conflict is detected during offline-to-online transition <br> b. System creates conflict copies <br> c. System notifies user when online |
| **Special Requirements**     | - Clear conflict notification <br> - Preservation of both file versions until resolution                                                                                                              |
| **Related FRs**              | <a href="#frFs006">FR-FS-006</a>, <a href="#frOff004">FR-OFF-004</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrRel003">NFR-REL-003</a>, <a href="#nfrUse001">NFR-USE-001</a>                                                                                                                                                |

## 4.5 Analyze OneDrive Content with Statistics

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-STAT-001                                                                                                                                                                                                            |
| **Name**                     | Analyze OneDrive Content with Statistics                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to understand OneDrive content without mounting <br> **System Administrator**: Wants to analyze storage usage                                                                                                                 |
| **Pre-conditions**           | 1. User has a Microsoft account with OneDrive <br> 2. onemount is installed on the Linux system <br> 3. User has authentication credentials                                                                                          |
| **Post-conditions**          | **Successful**: Statistics about OneDrive content are displayed <br> **Failure**: Error message is displayed                                                                    |
| **Main Flow**                | 1. User runs onemount with the statistics command <br> 2. System authenticates with Microsoft account <br> 3. System retrieves metadata for all files and folders <br> 4. System analyzes file type distribution <br> 5. System analyzes directory depth statistics <br> 6. System analyzes file size distribution <br> 7. System analyzes file age information <br> 8. System displays the statistics to the user                                                      |
| **Alternative Flows**        | **AF-1 Authentication Failure**: <br> a. Authentication fails <br> b. System displays error message <br> c. User is prompted to retry authentication <br><br> **AF-2 Large Account**: <br> a. User has a very large OneDrive account <br> b. System displays progress information during analysis <br> c. System may take longer to complete the analysis |
| **Special Requirements**     | - Internet connectivity for retrieving metadata <br> - Sufficient memory for analysis                                                                                                              |
| **Related FRs**              | <a href="#frStat001">FR-STAT-001</a>, <a href="#frStat002">FR-STAT-002</a>, <a href="#frStat003">FR-STAT-003</a>, <a href="#frStat004">FR-STAT-004</a>, <a href="#frStat005">FR-STAT-005</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrPerf001">NFR-PERF-001</a>, <a href="#nfrUse003">NFR-USE-003</a>                                                                                                                                                |

## 4.6 View File Status in Nemo File Manager

| Field                        | Description                                                                                                                                                                                                           |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Use Case ID**              | UC-INT-001                                                                                                                                                                                                            |
| **Name**                     | View File Status in Nemo File Manager                                                                                                                                                                                       |
| **Primary Actors**           | User                                                                                                                                                   |
| **Stakeholders & Interests** | **User**: Wants to easily identify file status in the file manager <br> **System Administrator**: Wants seamless integration with desktop environment                                                                                                                 |
| **Pre-conditions**           | 1. OneDrive is mounted as a filesystem <br> 2. Nemo file manager is installed <br> 3. Nemo extension for onemount is installed                                                                                          |
| **Post-conditions**          | **Successful**: OneDrive appears in Nemo sidebar with file status icons <br> **Failure**: OneDrive appears without status icons or integration                                                                    |
| **Main Flow**                | 1. User opens Nemo file manager <br> 2. System displays OneDrive in the Nemo sidebar <br> 3. User navigates to the OneDrive filesystem <br> 4. System displays file status icons (cloud, local, syncing) for each file <br> 5. User hovers over a file <br> 6. System displays detailed status information in a tooltip                                                      |
| **Alternative Flows**        | **AF-1 D-Bus Not Available**: <br> a. D-Bus service is not available <br> b. System falls back to reading extended attributes <br> c. File status icons are still displayed but with potential delay <br><br> **AF-2 Status Change**: <br> a. File status changes (e.g., download completes) <br> b. System updates the status icon in real-time through D-Bus signals |
| **Special Requirements**     | - Nemo file manager <br> - D-Bus for real-time updates <br> - Appropriate icons for different file states                                                                                                              |
| **Related FRs**              | <a href="#frInt001">FR-INT-001</a>, <a href="#frInt002">FR-INT-002</a>, <a href="#frInt003">FR-INT-003</a>, <a href="#frInt004">FR-INT-004</a>, <a href="#frInt005">FR-INT-005</a>, <a href="#frInt006">FR-INT-006</a>                                                                                                                                      |
| **Related NFRs**             | <a href="#nfrUse002">NFR-USE-002</a>                                                                                                                                                |
