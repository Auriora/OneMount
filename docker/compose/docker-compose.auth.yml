# Docker Compose override for authentication
# This file is generated by setup-auth-reference.sh
# It mounts the canonical auth token location into containers

name: onemount-test

services:
  test-runner:
    volumes:
      # Mount the canonical auth token directory (read-only)
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      # Point to the mounted token file
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json

  unit-tests:
    volumes:
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json

  integration-tests:
    volumes:
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json

  system-tests:
    volumes:
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json

  coverage:
    volumes:
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json

  shell:
    volumes:
      - /home/bcherrington/.cache/onedriver/home-bcherrington-OneDrive:/tmp/auth-tokens:ro
    environment:
      - ONEMOUNT_AUTH_PATH=/tmp/auth-tokens/auth_tokens.json
