# Implementing GitHub Issues with Junie AI

This directory contains scripts and utilities for implementing GitHub issues with the assistance of Junie AI.

## Overview

The main script `implement_github_issue.py` helps you:

1. Extract an issue from the GitHub repo based on issue number
2. Open the corresponding JetBrains task (creating a branch)
3. Gather relevant documentation
4. Create a Junie prompt for implementing the changes
5. Update the issue comment with implementation details
6. Close the issue if resolved
7. Commit the changes to git

## Usage

### Basic Usage

```bash
python3 scripts/ai-assistant/implement_github_issue.py <issue_number>
```

Replace `<issue_number>` with the GitHub issue number you want to implement.

### Example

```bash
python3 scripts/ai-assistant/implement_github_issue.py 117
```

This will:
1. Extract issue #117 from the GitHub issues JSON file
2. Open the JetBrains task for issue #117 (creating a branch)
3. Gather relevant documentation based on the issue content and labels
4. Create a Junie prompt with the issue details and implementation instructions
5. Save the prompt to a file in the `tmp` directory

### Using the Generated Prompt

After running the script, you'll find a Junie prompt file in the `tmp` directory named `junie_prompt_issue_<issue_number>.md`.

To use this prompt with Junie:

1. Open the prompt file
2. Copy the prompt content
3. Paste it into a conversation with Junie
4. Follow Junie's guidance to implement the issue
5. Update the issue comment with the implementation summary
6. Close the issue if resolved
7. Commit the changes to git

## Integration with Flora Plugins

This script can be used in conjunction with the [Flora plugins](../flora-plugins/README.md) for JetBrains IDEs. The Flora plugins provide additional functionality for working with GitHub issues in JetBrains IDEs.

### Using the Open GitHub Issue Plugin

The Open GitHub Issue Flora plugin allows you to open JetBrains tasks by GitHub issue number directly from Junie AI. This streamlines the workflow for implementing GitHub issues.

To use the plugin with Junie AI:

1. Ensure the Open GitHub Issue Flora plugin is installed in your JetBrains IDE (see [Flora Plugins README](../flora-plugins/README.md) for installation instructions)
2. When working with Junie AI, you can ask it to open a GitHub issue
3. Example: "Open GitHub issue 123"
4. Junie AI will use the Flora plugin to open the issue as a task in your JetBrains IDE

### Workflow with Flora Plugin

The enhanced workflow with the Flora plugin is:

1. Ask Junie AI to open a GitHub issue: "Open GitHub issue 123"
2. Junie AI uses the Flora plugin to open the issue as a task in your JetBrains IDE
3. Follow Junie's guidance to implement the issue
4. Update the issue comment with the implementation summary
5. Close the issue if resolved
6. Commit the changes to git

This integration eliminates the need to manually open JetBrains tasks, making the workflow more efficient.

## Prompt Structure

The generated Junie prompt includes:

1. Overview of the prompt purpose
2. Workflow steps:
   - Extract and understand the issue
   - Open JetBrains task and create branch
   - Review relevant documentation
   - Plan implementation
   - Implementation
   - Testing
   - Update issue and commit changes
   - Final checklist
3. Additional considerations (based on issue type):
   - For complex issues
   - For performance-critical changes
   - For UI changes
   - For Microsoft Graph API integration
   - For filesystem operations
4. Command examples for common tasks
5. Project-specific notes:
   - Project structure
   - Tech stack
   - Best practices
6. Issue details:
   - Issue title and number
   - Issue description
   - Issue labels
   - Relevant documentation references

## Additional Resources

### Reference Templates

The following templates are available for reference:

- **Generic Prompt Template**: `tmp/junie_prompt_template.md` - A simpler template that can be used as a reference. Note that the actual prompt generated by the script follows the more comprehensive format shown in the example above.

- **Example Implementation**: `tmp/junie_prompt_issue_example.md` - An example showing how a prompt for issue #117 might look with a full implementation plan and summary. This example uses the simpler format and is provided for reference only.

- **Comprehensive Prompt Template**: `tmp/combined_junie_prompt.md` - The comprehensive template that the script now uses to generate prompts. This template includes all the sections shown in the example above.

## Additional Notes

- The script currently loads issues from a local JSON file (`data/github_issues.json`). In a production environment, you might want to fetch issues directly from the GitHub API.
- The JetBrains task opening functionality may need to be adjusted based on your specific IDE and setup. The Flora plugin provides a more robust way to open JetBrains tasks.
- The script includes placeholder functions for updating issue comments, closing issues, and committing changes. These would need to be implemented with actual GitHub API calls and git commands in a production environment.

## Troubleshooting

If you encounter any issues:

1. Ensure the GitHub issues JSON file exists at `data/github_issues.json`
2. Check that the issue number you provided exists in the JSON file
3. Verify that you have the necessary permissions to open JetBrains tasks and interact with the GitHub repository
4. If using the Flora plugin, ensure it's properly installed and configured in your JetBrains IDE